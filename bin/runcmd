#!/usr/bin/env python3
# This file is placed in the Public Domain.
# pylint: disable=E1101,E0611,C0115,C0116,C0413,C0411,W0406


"operator bot"


import importlib
import os
import readline
import sys
import termios
import time


from op import Wd, format, keys
from run import Client, Event, docmd, parse, scan, scandir


Wd.workdir = os.path.expanduser("~/.runbot")


def importer(pkgname, modname):
    mod = importlib.import_module("%s.%s" % (pkgname, modname))
    scan(mod)


class CLI(Client):

    @staticmethod
    def raw(txt):
        print(txt)


def main():
    cfg = parse(' '.join(sys.argv[1:]))
    scandir("mod", importer)
    cli = CLI()
    docmd(cli, cfg.otxt)


main()
